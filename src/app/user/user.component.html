<div class="wrapper" *ngIf="user">

    <mat-card class="user-card" appearance="outlined">
        <mat-card-header>
          <img mat-card-avatar class="example-header-image" [src]="['https://ui-avatars.com/api/?name='+user.email]" >
          <mat-card-title>{{user.email}}</mat-card-title>
          <mat-card-subtitle>Total orders: {{user.orders.length}}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-actions>
          <button mat-button (click)="doChangePassword()"><i class="fa-solid fa-key"></i> Change password</button>
        </mat-card-actions>
        </mat-card>

    

    <div *ngIf="user.orders.length == 0">
        <p>Nema ordera</p>
    </div>
    
    <div *ngIf="user.orders.length > 0">
        <h3> Spisak ordera </h3>
        <ul>
            <li *ngFor="let order of user!.orders">
                movieId: {{order.movieId}}, Naslov: {{order.title}}, Broj karata: {{order.count}}, Cena po karti: {{order.pricePerCard}} dinara
            </li>
        </ul>
    </div>

    <main>
        <div class="wrapper" *ngIf="user.orders">
          <h1>Lista rezervacija</h1>
          <table mat-table [dataSource]="user.orders" class="mat-elevation-z8">
      
            <ng-container matColumnDef="movieId">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-hashtag"></i> Movie ID </th>
              <td mat-cell *matCellDef="let element"> {{element.movieId}} </td>
            </ng-container>
      
            <ng-container matColumnDef="title">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-quote-left"></i> Naslov </th>
              <td mat-cell *matCellDef="let element"> {{element.title}} </td>
            </ng-container>
      
            <ng-container matColumnDef="count">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-quote-right"></i> Broj karata </th>
              <td mat-cell *matCellDef="let element"> {{element.count}} </td>
            </ng-container>
      
            <ng-container matColumnDef="pricePerCard">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-clock"></i> Ukupna cena </th>
              <td mat-cell *matCellDef="let element"> {{element.pricePerCard*element.count}} din</td>
            </ng-container>
      
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-clapperboard"></i> Status </th>
              <td mat-cell *matCellDef="let element"> {{element.status}} </td>
            </ng-container>
      
            <ng-container matColumnDef="rating">
              <th mat-header-cell *matHeaderCellDef><i class="fa-solid fa-location-arrow"></i> Ocena </th>
              <td mat-cell *matCellDef="let element">{{element.rating}}</td>
            </ng-container>
      
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      
    </main>
</div>